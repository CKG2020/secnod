<html>
<head>
    <meta charset="utf-8">
    <title>批假中</title>
    <link rel="stylesheet" type="text/css" href="../static/css/regist.css"/>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <link rel="stylesheet" type="text/css" href="http://unpkg.com/view-design/dist/styles/iview.css">
    <script type="text/javascript" src="http://vuejs.org/js/vue.min.js"></script>
    <script type="text/javascript" src="http://unpkg.com/view-design/dist/iview.min.js"></script>
</head>
<body>
<div class="reg_user">
    <div id="header">

        <!--<h3>学生端</h3>-->
        <div id="app" style="margin-top:35px">
            <i-form ref="formInline" :model="formInline" :rules="ruleInline" style="width: 250px"
                    action="/student_login" method="post">
                <form-item prop="stu_number">输入待批假学生的学号
                    <i-input type="text" v-model="formInline.stu_number" placeholder="stu_number" size="large">
                        <icon type="ios-person-outline" slot="prepend"></icon>
                    </i-input>
                </form-item>
                <!--<form-item prop="stu_password">密码-->
                    <!--<i-input type="password" v-model="formInline.stu_password" placeholder="stu_password" size="large">-->
                        <!--<icon type="ios-lock-outline" slot="prepend"></icon>-->
                    <!--</i-input>-->
                <!--</form-item>-->
                <form-item>
                    <div style="margin-top: 20px">
                        <!--<a href="/register">-->
                        <i-button type="primary"  @click="func1()"   style="margin-left: 20px">同意</i-button>
                        <!--</a>-->
                        <i-button type="primary" @click="func2()" style="margin-left: 50px">不同意</i-button>
                    </div>
                </form-item>
            </i-form>
        </div>
    </div>
</div>
<script>

    var Main = {
        data() {
            return {
                formInline: {
                    stu_number: '',
                    // stu_password: ''
                },
                ruleInline: {
                    stu_number: [
                        {required: true, message: 'Please fill in the user name', trigger: 'blur'}
                    ],
                    stu_password: [
                        {required: true, message: 'Please fill in the password.', trigger: 'blur'},
                        {
                            type: 'string',
                            min: 5,
                            message: 'The password length cannot be less than 5 bits',
                            trigger: 'blur'
                        }
                    ]
                }
            }
        },
        methods: {
            func1() {

                let Sno = this.formInline.stu_number;

                $.ajax({
                    type: "post",
                    url: "/Record/tongyi",
                    data: {
                        "Sno": Sno,

                    },
                    success(res) {
                        let msg = JSON.stringify(res);
                        localStorage.setItem("localName", msg);
                        if (res === '1') {
                            alert('已通过该同学的请假');
                        } else {
                            alert('批假未成功')
                        }
                    }
                });


            },
            func2() {
                let Sno = this.formInline.stu_number;

                $.ajax({
                    type: "post",
                    url: "/Record/fandui",
                    data: {
                        "Sno": Sno,

                    },
                    success(res) {
                        let msg = JSON.stringify(res);
                        localStorage.setItem("localName", msg);

                        if (res === '1') {
                            alert('未批准该同学的请假要求');
                        } else {
                            alert('批假未成功')
                        }
                    }
                });


            }
        }


    }
    var Component = Vue.extend(Main);
    new Component().$mount('#app');



</script>
</body>
</html>